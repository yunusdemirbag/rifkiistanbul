<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anne Kedi BakÄ±m Oyunu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .game-window {
            width: 100vw;
            height: 100vh;
            max-width: 450px;
            max-height: 95vh;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 15px;
            padding: 8px;
            box-shadow: 
                0 0 30px rgba(0,0,0,0.5),
                inset 0 0 20px rgba(255,255,255,0.1);
            position: relative;
            border: 6px solid #2d1b69;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 500px) {
            .game-window {
                width: 95vw;
                height: 95vh;
                margin: 2.5vh auto;
            }
        }

        @media (min-width: 768px) {
            .game-window {
                width: 500px;
                height: 800px;
                margin: 10vh auto;
            }
        }

        .game-header {
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            color: white;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        @media (min-width: 768px) {
            .game-header {
                padding: 12px;
                font-size: 20px;
            }
        }

        .game-container {
            flex: 1;
            position: relative;
            background-image: url('oda.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
        }

        .husnanur {
            width: 120px;
            height: 150px;
            background-image: url('husnanur.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            cursor: pointer;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            transition: transform 0.3s ease;
        }

        @media (min-width: 768px) {
            .husnanur {
                width: 150px;
                height: 180px;
                bottom: 60px;
            }
        }

        .husnanur:hover {
            transform: scale(1.05);
        }

        .name-tag {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            border: 2px solid #FFD700;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        .kedi {
            width: 60px;
            height: 60px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            cursor: pointer;
            z-index: 5;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
            position: absolute;
            transition: all 0.3s ease;
        }

        @media (min-width: 768px) {
            .kedi {
                width: 80px;
                height: 80px;
            }
        }

        .rifki {
            background-image: url('rifki.png');
        }

        .istanbul {
            background-image: url('istanbul.png');
        }

        .kedi:hover {
            transform: scale(1.1);
        }

        .hud {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.9);
            color: #FFD700;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: bold;
            z-index: 100;
            border: 2px solid #FFD700;
            min-width: 100px;
        }

        @media (min-width: 768px) {
            .hud {
                font-size: 14px;
                padding: 12px;
            }
        }

        .character {
            transition: all 0.3s ease;
            user-select: none;
            -webkit-user-select: none;
        }

        .item {
            width: 50px;
            height: 50px;
            position: absolute;
            cursor: move;
            z-index: 15;
            transition: transform 0.2s ease;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        @media (min-width: 768px) {
            .item {
                width: 70px;
                height: 70px;
            }
        }

        .item:hover {
            transform: scale(1.1);
        }

        .item.dragging {
            transform: scale(1.2);
            z-index: 20;
            transition: none;
        }

        .mama-kabi {
            background-image: url('mama.png');
            bottom: 20px;
            left: 20px;
        }

        .su-kabi {
            background-image: url('su.png');
            bottom: 20px;
            left: 80px;
        }

        @media (min-width: 768px) {
            .mama-kabi {
                bottom: 60px;
                left: 20px;
            }
            
            .su-kabi {
                bottom: 60px;
                left: 100px;
            }
        }

        .speech-bubble {
            position: absolute;
            background: white;
            border: 3px solid #333;
            border-radius: 12px;
            padding: 8px 12px;
            font-size: 11px;
            font-weight: bold;
            max-width: 120px;
            word-wrap: break-word;
            z-index: 25;
            animation: popIn 0.3s ease;
            box-shadow: 
                2px 2px 0px rgba(0,0,0,0.3),
                inset 1px 1px 2px rgba(255,255,255,0.8);
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
        }

        @media (min-width: 768px) {
            .speech-bubble {
                border: 4px solid #333;
                border-radius: 15px;
                padding: 10px 15px;
                font-size: 13px;
                max-width: 140px;
                top: -80px;
            }
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid white;
            filter: drop-shadow(0px 2px 0px rgba(0,0,0,0.3));
        }

        @media (min-width: 768px) {
            .speech-bubble::after {
                bottom: -12px;
                border-left: 12px solid transparent;
                border-right: 12px solid transparent;
                border-top: 12px solid white;
            }
        }

        @keyframes popIn {
            0% { 
                transform: translateX(-50%) scale(0) rotate(-5deg); 
                opacity: 0; 
            }
            80% { 
                transform: translateX(-50%) scale(1.1) rotate(2deg); 
                opacity: 1; 
            }
            100% { 
                transform: translateX(-50%) scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }

        .kedi-istek {
            background: linear-gradient(145deg, #FFE4E1, #FFC0CB);
            color: #8B0000;
            border-color: #8B0000;
        }

        .anne-cevap {
            background: linear-gradient(145deg, #E6F3FF, #B0E0E6);
            color: #000080;
            border-color: #000080;
        }

        .basarili {
            background: linear-gradient(145deg, #90EE90, #98FB98);
            color: #006400;
            border-color: #006400;
        }

        .hatali {
            background: linear-gradient(145deg, #FFB6C1, #FFA0B4);
            color: #8B0000;
            border-color: #8B0000;
        }

        .ozur {
            background: linear-gradient(145deg, #D8BFD8, #DDA0DD);
            color: #4B0082;
            border-color: #4B0082;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, rgba(0,0,0,0.95), rgba(20,20,20,0.95));
            color: #FFD700;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #FFD700;
            text-align: center;
            z-index: 100;
            display: none;
            box-shadow: 
                5px 5px 0px rgba(0,0,0,0.5),
                inset 2px 2px 4px rgba(255,215,0,0.3);
            max-width: 90%;
        }

        @media (min-width: 768px) {
            .game-over {
                padding: 30px;
                border: 4px solid #FFD700;
            }
        }

        .restart-btn {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            border: 3px solid #2E7D32;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 
                3px 3px 0px rgba(0,0,0,0.3),
                inset 1px 1px 2px rgba(255,255,255,0.3);
        }

        @media (min-width: 768px) {
            .restart-btn {
                padding: 12px 24px;
                font-size: 16px;
            }
        }

        .restart-btn:hover {
            background: linear-gradient(145deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 
                5px 5px 0px rgba(0,0,0,0.3),
                inset 1px 1px 2px rgba(255,255,255,0.3);
        }

        /* Kediler iÃ§in giriÅ animasyonu */
        @keyframes kediBelir {
            0% { 
                opacity: 0; 
                transform: scale(0) rotate(180deg); 
            }
            50% { 
                opacity: 0.5; 
                transform: scale(1.3) rotate(90deg); 
            }
            100% { 
                opacity: 1; 
                transform: scale(1) rotate(0deg); 
            }
        }

        .kedi.yeni-pozisyon {
            animation: kediBelir 0.8s ease-out;
        }

        /* Touch iyileÅtirmeleri */
        .item, .kedi, .husnanur {
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Mobil iÃ§in daha bÃ¼yÃ¼k dokunma alanlarÄ± */
        @media (max-width: 767px) {
            .item {
                padding: 10px;
                margin: -10px;
            }
            
            .kedi {
                padding: 15px;
                margin: -15px;
            }
        }

        /* Mobil klavye iÃ§in viewport dÃ¼zeltmesi */
        @media screen and (max-height: 500px) {
            .game-window {
                height: 100vh;
                margin: 0 auto;
            }
        }
    </style>
</head>
<body>
    <div class="header-bar">Nurella Kids - Kedi BakÄ±m Oyunu</div>
    <div class="game-window">
        <div class="game-header">Anne Kedi BakÄ±m Oyunu</div>
        <div class="game-container">
            <div class="husnanur character">
                <div class="name-tag">Husnanur</div>
            </div>
            <div class="rifki kedi character">
                <div class="name-tag">RÄ±fkÄ±</div>
            </div>
            <div class="istanbul kedi character">
                <div class="name-tag">Ä°stanbul</div>
            </div>
            
            <div class="mama-kabi item" draggable="true"></div>
            <div class="su-kabi item" draggable="true"></div>

            <div class="hud">
                <div>Skor: <span id="skor">0</span></div>
                <div>SÃ¼re: <span id="sure">30</span>s</div>
                <div>Seviye: <span id="seviye">1</span></div>
            </div>

            <div class="game-over" id="gameOver">
                <h2>ANNEEEEEG!</h2>
                <p>Oyun Bitti!</p>
                <p>Final Skoru: <span id="finalSkor">0</span></p>
                <button class="restart-btn" onclick="yeniOyun()">Yeniden BaÅla</button>
            </div>
        </div>
    </div>

    <script>
        let skor = 0;
        let sure = 30;
        let seviye = 1;
        let oyunAktif = false;
        let draggedElement = null;
        let kullanilmisPozisyonlar = [];
        let kedilerinIstekleri = {};
        let oyunBasladi = false;
        let istekTimers = {}; // Her kedi iÃ§in timer takibi
        // Her kedi iÃ§in son istek tÃ¼rÃ¼nÃ¼ tutacak obje
        let sonIstekTuru = { rifki: null, istanbul: null };
        let karsilananIstekSayisi = 0;

        // Mobilde sÃ¼rÃ¼kleme iÃ§in deÄiÅkenler
        let isDragging = false;
        let currentDragElement = null;
        let touchStartX = 0;
        let touchStartY = 0;
        let touchOffsetX = 0;
        let touchOffsetY = 0;

        // Mama ve su kabÄ± orijinal pozisyonlarÄ±
        let orijinalPozisyonlar = {};

        const kediler = ['rifki', 'istanbul'];
        const kediElementleri = {
            rifki: document.querySelector('.rifki'),
            istanbul: document.querySelector('.istanbul')
        };

        // Kedilerin belireceÄi pozisyonlar - responsive
        function getPozisyonAlanlari() {
            const gameContainer = document.querySelector('.game-container');
            const containerWidth = gameContainer ? gameContainer.offsetWidth : 400;
            const containerHeight = gameContainer ? gameContainer.offsetHeight : 600;
            
            // Mobil ve tablet iÃ§in pozisyonlarÄ± dinamik olarak ayarla
            if (window.innerWidth < 768) {
                return [
                    { x: 30, y: 60, isim: 'pencere-kenari-1' },
                    { x: 100, y: 60, isim: 'pencere-kenari-2' },
                    { x: 170, y: 80, isim: 'komidin-ustu' },
                    { x: 220, y: 110, isim: 'dolap-ustu-1' },
                    { x: 150, y: 110, isim: 'dolap-ustu-2' },
                    { x: 30, y: 140, isim: 'yatak-ustu-1' },
                    { x: 90, y: 140, isim: 'yatak-ustu-2' },
                    { x: 140, y: 140, isim: 'yatak-ustu-3' },
                    { x: 180, y: 180, isim: 'yatak-kenari' },
                    { x: 30, y: 220, isim: 'hali-ustu-1' },
                    { x: 90, y: 220, isim: 'hali-ustu-2' },
                    { x: 150, y: 220, isim: 'hali-ustu-3' },
                    { x: 210, y: 220, isim: 'hali-ustu-4' },
                    { x: 30, y: 280, isim: 'hali-kenari-1' },
                    { x: 90, y: 280, isim: 'hali-kenari-2' },
                    { x: 150, y: 280, isim: 'hali-kenari-3' },
                    { x: 210, y: 280, isim: 'hali-kenari-4' },
                    { x: 270, y: 280, isim: 'hali-kenari-5' },
                    { x: 60, y: 350, isim: 'oda-zemini-1' },
                    { x: 120, y: 350, isim: 'oda-zemini-2' },
                    { x: 180, y: 350, isim: 'oda-zemini-3' },
                    { x: 240, y: 350, isim: 'oda-zemini-4' }
                ];
            } else {
                return [
                    { x: 50, y: 80, isim: 'pencere-kenari-1' },
                    { x: 150, y: 80, isim: 'pencere-kenari-2' },
                    { x: 250, y: 100, isim: 'komidin-ustu' },
                    { x: 300, y: 150, isim: 'dolap-ustu-1' },
                    { x: 220, y: 150, isim: 'dolap-ustu-2' },
                    { x: 50, y: 170, isim: 'yatak-ustu-1' },
                    { x: 130, y: 170, isim: 'yatak-ustu-2' },
                    { x: 190, y: 170, isim: 'yatak-ustu-3' },
                    { x: 230, y: 230, isim: 'yatak-kenari' },
                    { x: 50, y: 270, isim: 'hali-ustu-1' },
                    { x: 130, y: 270, isim: 'hali-ustu-2' },
                    { x: 210, y: 270, isim: 'hali-ustu-3' },
                    { x: 290, y: 270, isim: 'hali-ustu-4' },
                    { x: 50, y: 350, isim: 'hali-kenari-1' },
                    { x: 130, y: 350, isim: 'hali-kenari-2' },
                    { x: 210, y: 350, isim: 'hali-kenari-3' },
                    { x: 290, y: 350, isim: 'hali-kenari-4' },
                    { x: 370, y: 350, isim: 'hali-kenari-5' },
                    { x: 90, y: 430, isim: 'oda-zemini-1' },
                    { x: 170, y: 430, isim: 'oda-zemini-2' },
                    { x: 250, y: 430, isim: 'oda-zemini-3' },
                    { x: 330, y: 430, isim: 'oda-zemini-4' }
                ];
            }
        }

        const istekMesajlari = {
            acikti: [
                "Anne Ã§ok acÄ±ktÄ±m hadi! miyav miyav",
                "Anne karnÄ±m gurulduyor, acil MAMA!",
                "Miyav miyav! Anne Ã§ok acÄ±m var, MAMA istiyorum!",
                "Anne lÃ¼tfen MAMA ver, Ã¶lÃ¼yorum aÃ§lÄ±ktan!",
                "Miyav! Anne acÄ±ktÄ±m Ã§ok Ã§ok! MAMA!",
                "Anne MAMA istiyorum lÃ¼tfen!",
                "KarnÄ±m boÅ anne, hemen MAMA getir!",
                "Miyav miyav anne, MAMA zamanÄ± geldi!",
                "Anne Ã§ok aÃ§ kaldÄ±m, MAMA ver bana!",
                "MAMA MAMA MAMA! Anne Ã§ok istiyorum!",
                "Anne benim midem ses Ã§Ä±karÄ±yor, MAMA!",
                "Miyav anne, gÃ¼zel MAMA istiyorum!",
                "Anne acÄ±ktÄ±m ya, hemen MAMA getir!",
                "Anne Ã§ok acÄ±ktÄ±m hadi, MAMA ver!",
                "Anne Ã§ok Ã§ok acÄ±ktÄ±m, MAMA lÃ¼tfen!"
            ],
            susadi: [
                "Anne susadÄ±m acil SU istiyorum!",
                "Miyav miyav! SU istiyorum anne!",
                "Anne Ã§ok susadÄ±m, dilim kurudu! SU!",
                "SU ver anne, miyav miyav hadi!",
                "Anne susuzluktan Ã¶lÃ¼yorum! SU!",
                "Miyav! Anne SU getir bana!",
                "Anne Ã§ok susadÄ±m hadi! SU!",
                "SU istiyorum anne, Ã§ok susadÄ±m!",
                "Anne aÄzÄ±m Ã§ok kurudu, SU ver!",
                "Miyav miyav! Taze SU istiyorum!",
                "Anne susuzluk beni bitirdi, SU!",
                "SU SU SU! Anne hemen getir!",
                "Anne Ã§ok susadÄ±m ya, soÄuk SU!",
                "Miyav anne, temiz SU istiyorum!",
                "Anne SU ver bana, Ã§ok susadÄ±m!"
            ]
        };

        const anneCevaplari = {
            bekle: [
                "Tamam yavrum bekle biraz",
                "Hemen geliyorum canÄ±m benim",
                "Sabret biraz tatlÄ± kedim",
                "Anne geliyor, endiÅelenme",
                "Bir dakika canÄ±m, hemen",
                "Tamam aÅkÄ±m, anne hallediyor",
                "Bekle tatlÄ±m, anne getiyor",
                "SabÄ±rlÄ± ol canÄ±m, geliyorum",
                "Tamam Rifki getiriyorum oÄlum",
                "Tamam Ä°stanbul'cum bekle anniÅ geliyor",
                "Hemen geliyorum Rifki canÄ±m",
                "Sabret Ä°stanbul tatlÄ±m, anne geliyor",
                "Bir dakika Rifki'ciÄim, hemen",
                "Tamam Ä°stanbul bekle biraz"
            ],
            basarili: [
                "TeÅekkÃ¼rler anniÅ, seni Ã§ok seviyorum!",
                "Turuncu saÃ§lÄ± annem benim harikasÄ±n!",
                "Lilyum gibi kokuyorsun anne, Lilyumlar seni gÃ¶rse bana benziyorsun derdi anne teÅekkÃ¼rler!",
                "Ãok uzak kaldÄ±k anniÅ, bir daha bu kadar uzak kalma bizden!",
                "Aferin anne! Ãok iyi bakÄ±yorsun bize anniÅ!",
                "Seni Ã§ok seviyorum anne canÄ±m!",
                "En iyi anne sensin dÃ¼nyada anniÅ!",
                "TeÅekkÃ¼rler anne, Ã§ok lezzetli oldu!",
                "Miyav miyav! SÃ¼persin anniÅ!",
                "Anne sen Ã§ok iyisin, seni seviyorum!",
                "Vay be anne, tam istediÄim gibi!",
                "AnniÅ sen mÃ¼kemmelsin, teÅekkÃ¼rler!",
                "Sen bu dÃ¼nyadaki en gÃ¼zel kediciÄimsin anniÅ!",
                "Anne benim gÃ¼zel annem, Ã§ok teÅekkÃ¼rler!",
                "AnniÅ sen Ã§ok tatlÄ±sÄ±n, seni Ã¶pÃ¼yorum!",
                "Lilyumdan da gÃ¼zelsin Annem!"
            ],
            hatali: [
                "Anne ne yapÄ±yorsun sen Ã¶yle? Ben MAMA istemiÅtim!",
                "Bu ne ya anne, ben SU istemiÅtim! MIYAAAAV!",
                "Anne kafan mÄ± karÄ±ÅtÄ± tatlÄ±m? Ben bunu istememiÅtim!",
                "MIYAAAAV MIYAAAAV! YanlÄ±Å Åey bu anne!",
                "Anne dikkatli ol biraz! Ben bunu istememiÅtim!",
                "Ee anne, bu MAMA deÄil ki! Ben MAMA istemiÅtim!",
                "Anne sen karÄ±ÅtÄ±rdÄ±n galiba! MIYAAAAV!",
                "MIYAAAAV! Anne bu istediÄim deÄil! Ben SU istemiÅtim!",
                "AnniÅ bu yanlÄ±Å, ben baÅka Åey istemiÅtim! MIYAAAAV!",
                "Anne ne yaptÄ±n ya, karÄ±ÅtÄ±rdÄ±n! Ben SU istemiÅtim!",
                "Bu SU deÄil anne, MAMA istemiÅtim! MIYAAAAV!",
                "AnniÅ dikkat et, yanlÄ±Å verdin! Ben bunu istemiyorum!"
            ],
            ozur: [
                "Ay Ã¶zÃ¼r dilerim canÄ±m, hemen doÄrusunu getiriyorum!",
                "AnniÅ Ã§ok Ã¶zÃ¼r diler, kafam karÄ±ÅtÄ±!",
                "HaklÄ±sÄ±n tatlÄ±m, anne yanlÄ±Å yaptÄ±, hemen dÃ¼zeltiyorum!",
                "Vay be, anne yanlÄ±Å getirdi, hemen doÄrusunu alÄ±yorum!",
                "Ãok haklÄ±sÄ±n, anne dalgÄ±n bugÃ¼n, Ã¶zÃ¼r dilerim!",
                "Ay pardon canÄ±m kedim, hemen istediÄini getiriyorum!",
                "AnniÅ Ã§ok Ã¼zgÃ¼n, hemen doÄrusunu getireceÄim!",
                "HaklÄ±sÄ±n minik kedim, anne hata yaptÄ±!",
                "ÃzÃ¼r dilerim canÄ±m, hemen dÃ¼zeltiyorum!"
            ],
            afiyet: [
                "Afiyet olsun canÄ±m benim!",
                "Oh ne gÃ¼zel, afiyet bal Åeker olsun!",
                "Afiyet olsun tatlÄ± kedim, sevgiyle ye!",
                "GÃ¼zel kedim benim, afiyet olsun sana!",
                "Afiyetle ye canÄ±m, anne seni Ã§ok seviyor!",
                "Afiyet olsun minik patilerim!",
                "Annenin gÃ¼zel kedisi, afiyet Åeker olsun!",
                "Ye bakalÄ±m gÃ¼zelim, afiyet olsun!",
                "Afiyet olsun canÄ±m, daha ister misin?",
                "Afiyetler olsun tatlÄ± kediciÄim!",
                "Annenin canÄ±, afiyet olsun sana!",
                "Oh oh, afiyet olsun minik yavrum!"
            ]
        };

        function rastgelePozisyon(element, kediAdi = null) {
            const pozisyonAlanlari = getPozisyonAlanlari();
            let uygunPozisyonlar = pozisyonAlanlari.filter(p => !kullanilmisPozisyonlar.includes(p.isim));
            
            if (uygunPozisyonlar.length === 0) {
                kullanilmisPozisyonlar = [];
                uygunPozisyonlar = pozisyonAlanlari;
            }
            
            // DiÄer kedinin pozisyonunu al
            let digerKediPozisyonu = null;
            if (kediAdi) {
                const digerKedi = kediAdi === 'rifki' ? 'istanbul' : 'rifki';
                const digerKediEl = kediElementleri[digerKedi];
                if (digerKediEl) {
                    digerKediPozisyonu = {
                        x: parseInt(digerKediEl.style.left || '0'),
                        y: parseInt(digerKediEl.style.top || '0')
                    };
                }
            }
            
            // EÄer diÄer kedi varsa, ona yakÄ±n pozisyonlarÄ± eliyoruz
            if (digerKediPozisyonu) {
                uygunPozisyonlar = uygunPozisyonlar.filter(p => {
                    const dx = p.x - digerKediPozisyonu.x;
                    const dy = p.y - digerKediPozisyonu.y;
                    const mesafe = Math.sqrt(dx*dx + dy*dy);
                    return mesafe > 80; // 80px ve altÄ± yakÄ±nlÄ±klarÄ± ele
                });
                // EÄer hiÃ§ uygun pozisyon kalmazsa, tÃ¼m pozisyonlardan seÃ§
                if (uygunPozisyonlar.length === 0) {
                    uygunPozisyonlar = pozisyonAlanlari;
                }
            }
            
            const randomIndex = Math.floor(Math.random() * uygunPozisyonlar.length);
            const secilenPozisyon = uygunPozisyonlar[randomIndex];
            
            kullanilmisPozisyonlar.push(secilenPozisyon.isim);
            
            // Oyun alanÄ± sÄ±nÄ±rlarÄ±nÄ± kontrol et - mor Ã§erÃ§eveyi geÃ§mesin
            const gameContainer = document.querySelector('.game-container');
            const maxX = gameContainer.offsetWidth - element.offsetWidth - 20; // 20px kenar boÅluÄu
            const maxY = gameContainer.offsetHeight - element.offsetHeight - 60; // 60px alt boÅluk (header iÃ§in)
            
            let x = Math.max(20, Math.min(secilenPozisyon.x, maxX));
            let y = Math.max(60, Math.min(secilenPozisyon.y, maxY));
            
            element.style.left = x + 'px';
            element.style.top = y + 'px';
            element.classList.add('yeni-pozisyon');
            
            setTimeout(() => {
                element.classList.remove('yeni-pozisyon');
            }, 800);
        }

        function yeniIstek(kedi) {
            if (!oyunAktif) return;
            
            const kediElement = kediElementleri[kedi];
            
            // EÄer kedinin zaten aktif bir isteÄi varsa, yeni istek oluÅturma
            if (kedilerinIstekleri[kedi]) return;
            
            // Yeni pozisyon ver
            rastgelePozisyon(kediElement, kedi);
            
            // Pozisyon animasyonu bittikten sonra istek ver
            setTimeout(() => {
                if (!oyunAktif || kedilerinIstekleri[kedi]) return;
                
                // Son istekle aynÄ± olmasÄ±n diye rastgele istek tÃ¼rÃ¼ seÃ§imi
                let istekTuru;
                do {
                    istekTuru = Math.random() < 0.5 ? 'acikti' : 'susadi';
                } while (sonIstekTuru[kedi] === istekTuru && Math.random() < 0.7); // %70 aynÄ± gelmesin
                sonIstekTuru[kedi] = istekTuru;
                kedilerinIstekleri[kedi] = istekTuru;
                
                // Rastgele bir mesaj seÃ§
                const mesajlar = istekMesajlari[istekTuru];
                const mesaj = mesajlar[Math.floor(Math.random() * mesajlar.length)];
                
                // KonuÅma balonu oluÅtur
                konusmaBalonuOlustur(kediElement, mesaj, 'kedi-istek');
                
                // Anne cevap versin
                setTimeout(() => {
                    if (!oyunAktif) return;
                    const anneElement = document.querySelector('.husnanur');
                    const anneMesaj = anneCevaplari.bekle[Math.floor(Math.random() * anneCevaplari.bekle.length)];
                    konusmaBalonuOlustur(anneElement, anneMesaj, 'anne-cevap');
                }, 1000);

                // HÄ±z ayarÄ±: karÅÄ±lanan istek sayÄ±sÄ±na gÃ¶re tekrar sÃ¼resi
                let tekrarSuresi = 2000;
                if (karsilananIstekSayisi >= 60) {
                    tekrarSuresi = 700;
                } else if (karsilananIstekSayisi >= 40) {
                    tekrarSuresi = 1100;
                } else if (karsilananIstekSayisi >= 10) {
                    tekrarSuresi = 1500;
                }
                // EÄer istek karÅÄ±lanmazsa tekrar tekrar istemeye devam etsin
                let tekrarIstek = () => {
                    if (!oyunAktif) return;
                    if (kedilerinIstekleri[kedi]) {
                        // Hala istek karÅÄ±lanmadÄ±ysa tekrar balon gÃ¶ster
                        const yeniMesaj = mesajlar[Math.floor(Math.random() * mesajlar.length)];
                        konusmaBalonuOlustur(kediElement, yeniMesaj, 'kedi-istek');
                        setTimeout(tekrarIstek, tekrarSuresi);
                    }
                };
                setTimeout(tekrarIstek, tekrarSuresi);
            }, 900);
        }

        function konusmaBalonuOlustur(element, mesaj, tip) {
            // EÄer zaten bir konuÅma balonu varsa, onu kaldÄ±r
            const mevcutBalon = element.querySelector('.speech-bubble');
            if (mevcutBalon) {
                element.removeChild(mevcutBalon);
            }

            const balloon = document.createElement('div');
            balloon.className = `speech-bubble ${tip}`;
            balloon.textContent = mesaj;
            
            // Husnanur iÃ§in balon daha aÅaÄÄ±da olsun
            if (element.classList.contains('husnanur')) {
                balloon.style.top = '-70px'; // Karakterin hemen Ã¼stÃ¼
            } else {
                balloon.style.top = '-110px'; // DiÄer karakterler iÃ§in daha yukarÄ±
            }
            balloon.style.left = '50%';
            balloon.style.transform = 'translateX(-50%)';
            
            element.appendChild(balloon);
            
            // Balonun ekranda kalma sÃ¼resi
            let sure = 1500; // VarsayÄ±lan 1.5 saniye
            if (tip === 'basarili') {
                sure = 3000; // TeÅekkÃ¼r (baÅarÄ±lÄ±) balonu 3 saniye
            }
            
            // Balonun pozisyonunu kontrol et ve dÃ¼zelt - mor Ã§erÃ§eveyi geÃ§mesin
            setTimeout(() => {
                const gameContainer = document.querySelector('.game-container');
                const containerRect = gameContainer.getBoundingClientRect();
                const balloonRect = balloon.getBoundingClientRect();
                
                let shiftX = 0;
                let shiftY = 0;
                
                // Sol sÄ±nÄ±r kontrolÃ¼
                if (balloonRect.left < containerRect.left + 10) {
                    shiftX = containerRect.left + 10 - balloonRect.left;
                }
                // SaÄ sÄ±nÄ±r kontrolÃ¼
                else if (balloonRect.right > containerRect.right - 10) {
                    shiftX = containerRect.right - 10 - balloonRect.right;
                }
                
                // Ãst sÄ±nÄ±r kontrolÃ¼ (header'Ä± geÃ§mesin)
                if (balloonRect.top < containerRect.top + 60) {
                    shiftY = containerRect.top + 60 - balloonRect.top;
                }
                
                // Alt sÄ±nÄ±r kontrolÃ¼
                if (balloonRect.bottom > containerRect.bottom - 10) {
                    shiftY = containerRect.bottom - 10 - balloonRect.bottom;
                }
                
                if (shiftX !== 0 || shiftY !== 0) {
                    balloon.style.transform = `translateX(calc(-50% + ${shiftX}px)) translateY(${shiftY}px)`;
                }
            }, 10);
            
            setTimeout(() => {
                if (balloon.parentNode === element) {
                    element.removeChild(balloon);
                }
            }, sure);
        }

        function kediTikla(e) {
            if (!oyunAktif) return;
            const kedi = this.classList.contains('rifki') ? 'rifki' : 'istanbul';
            
            // EÄer kedinin bir isteÄi yoksa yeni istek ver
            if (!kedilerinIstekleri[kedi]) {
                yeniIstek(kedi);
            }
        }

        // Yeni mobil odaklÄ± sÃ¼rÃ¼kleme sistemi
        function handleTouchStart(e) {
            if (!oyunAktif) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            const touch = e.touches[0];
            const element = e.currentTarget;
            
            isDragging = true;
            currentDragElement = element;
            
            // Element pozisyonunu al
            const rect = element.getBoundingClientRect();
            const containerRect = document.querySelector('.game-container').getBoundingClientRect();
            
            touchOffsetX = touch.clientX - rect.left;
            touchOffsetY = touch.clientY - rect.top;
            
            element.classList.add('dragging');
            
            // Elementin z-index'ini artÄ±r
            element.style.zIndex = '30';
        }

        function handleTouchMove(e) {
            if (!isDragging || !currentDragElement || !oyunAktif) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            const touch = e.touches[0];
            const gameContainer = document.querySelector('.game-container');
            const containerRect = gameContainer.getBoundingClientRect();
            
            // Yeni pozisyonu hesapla
            let newX = touch.clientX - containerRect.left - touchOffsetX;
            let newY = touch.clientY - containerRect.top - touchOffsetY;
            
            // SÄ±nÄ±rlarÄ± kontrol et
            const elementWidth = currentDragElement.offsetWidth;
            const elementHeight = currentDragElement.offsetHeight;
            
            newX = Math.max(0, Math.min(newX, containerRect.width - elementWidth));
            newY = Math.max(0, Math.min(newY, containerRect.height - elementHeight));
            
            // Elementi hareket ettir
            currentDragElement.style.left = newX + 'px';
            currentDragElement.style.top = newY + 'px';
            currentDragElement.style.bottom = 'auto';
            
            // Kediler Ã¼zerinde mi kontrol et (gerÃ§ek zamanlÄ±)
            checkDropOnKedi(touch.clientX, touch.clientY);
        }

        function handleTouchEnd(e) {
            if (!isDragging || !currentDragElement) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            // SÃ¼rÃ¼kleme iÅlemini sonlandÄ±r
            currentDragElement.classList.remove('dragging');
            currentDragElement.style.zIndex = '15';
            
            // Elementi hemen orijinal yerine dÃ¶ndÃ¼r
            resetItemPosition(currentDragElement);
            
            isDragging = false;
            currentDragElement = null;
        }

        function checkDropOnKedi(clientX, clientY) {
            if (!currentDragElement) return;
            
            // Hangi kedinin Ã¼zerinde olduÄunu kontrol et
            const elementsAtPoint = document.elementsFromPoint(clientX, clientY);
            let droppedOnKedi = null;
            
            for (let el of elementsAtPoint) {
                if (el.classList.contains('kedi')) {
                    droppedOnKedi = el;
                    break;
                }
            }
            
            // EÄer kedi Ã¼zerine geldiysek iÅlemi gerÃ§ekleÅtir
            if (droppedOnKedi) {
                handleDrop(droppedOnKedi, currentDragElement);
                
                // Elementi hemen yerine dÃ¶ndÃ¼r
                currentDragElement.classList.remove('dragging');
                currentDragElement.style.zIndex = '15';
                resetItemPosition(currentDragElement);
                
                // SÃ¼rÃ¼kleme iÅlemini sonlandÄ±r
                isDragging = false;
                currentDragElement = null;
            }
        }

        function resetItemPosition(element) {
            if (element.classList.contains('mama-kabi')) {
                element.style.left = '20px';
                element.style.top = 'auto';
                if (window.innerWidth >= 768) {
                    element.style.bottom = '60px';
                } else {
                    element.style.bottom = '20px';
                }
            } else if (element.classList.contains('su-kabi')) {
                if (window.innerWidth >= 768) {
                    element.style.left = '100px';
                    element.style.bottom = '60px';
                } else {
                    element.style.left = '80px';
                    element.style.bottom = '20px';
                }
                element.style.top = 'auto';
            }
        }

        function handleDrop(kediElement, draggedItem) {
            const kedi = kediElement.classList.contains('rifki') ? 'rifki' : 'istanbul';
            const istekTuru = kedilerinIstekleri[kedi];
            
            // EÄer kedinin bir isteÄi yoksa, bir Åey yapma
            if (!istekTuru) return;
            
            let dogruCevap = false;
            let yanlisCevap = false;
            
            // DoÄru eÅleÅme kontrolÃ¼
            if (draggedItem.classList.contains('mama-kabi') && istekTuru === 'acikti') {
                dogruCevap = true;
            } else if (draggedItem.classList.contains('su-kabi') && istekTuru === 'susadi') {
                dogruCevap = true;
            } else {
                yanlisCevap = true;
            }
            
            if (dogruCevap) {
                // DoÄru eÅleÅme durumunda
                const basariliMesaj = anneCevaplari.basarili[Math.floor(Math.random() * anneCevaplari.basarili.length)];
                konusmaBalonuOlustur(kediElement, basariliMesaj, 'basarili');
                
                // Anne afiyet olsun desin
                setTimeout(() => {
                    if (!oyunAktif) return;
                    const anneElement = document.querySelector('.husnanur');
                    const afiyetMesaj = anneCevaplari.afiyet[Math.floor(Math.random() * anneCevaplari.afiyet.length)];
                    konusmaBalonuOlustur(anneElement, afiyetMesaj, 'anne-cevap');
                }, 1500);
                
                // Skoru artÄ±r
                skor += 10 * seviye;
                document.getElementById('skor').textContent = skor;
                
                // SÃ¼reyi artÄ±r
                sure += 5;
                document.getElementById('sure').textContent = sure;
                
                // Ä°steÄi sÄ±fÄ±rla
                delete kedilerinIstekleri[kedi];
                
                // Bu kedinin timer'Ä±nÄ± da temizle
                if (istekTimers[kedi]) {
                    clearTimeout(istekTimers[kedi]);
                    delete istekTimers[kedi];
                }
                
                // TeÅekkÃ¼r ettikten hemen sonra yeni istek gelsin
                setTimeout(() => {
                    if (oyunAktif) yeniIstek(kedi);
                }, 1600);
                
                karsilananIstekSayisi++;
            } else if (yanlisCevap) {
                // YanlÄ±Å eÅleÅme durumunda
                const hataliMesaj = anneCevaplari.hatali[Math.floor(Math.random() * anneCevaplari.hatali.length)];
                konusmaBalonuOlustur(kediElement, hataliMesaj, 'hatali');
                
                // Anne Ã¶zÃ¼r dilesin
                setTimeout(() => {
                    if (!oyunAktif) return;
                    const anneElement = document.querySelector('.husnanur');
                    const ozurMesaj = anneCevaplari.ozur[Math.floor(Math.random() * anneCevaplari.ozur.length)];
                    konusmaBalonuOlustur(anneElement, ozurMesaj, 'ozur');
                }, 1500);
                
                // Skoru azalt
                skor = Math.max(0, skor - 5);
                document.getElementById('skor').textContent = skor;
                
                // SÃ¼reyi azalt
                sure = Math.max(1, sure - 2);
                document.getElementById('sure').textContent = sure;
            }
        }

        // Eski sÃ¼rÃ¼kleme fonksiyonlarÄ±nÄ± kaldÄ±r ve yenilerini ekle
        function dragStart(e) {
            // Sadece mouse iÃ§in
            if (e.type === 'mousedown' && !oyunAktif) return;
            
            isDragging = true;
            currentDragElement = this;
            this.classList.add('dragging');
            this.style.zIndex = '30';
        }

        function drag(e) {
            // Sadece mouse iÃ§in
            if (e.type === 'mousemove' && isDragging && currentDragElement && oyunAktif) {
                e.preventDefault();
                
                const gameContainer = document.querySelector('.game-container');
                const containerRect = gameContainer.getBoundingClientRect();
                
                // Pozisyonu hesapla
                let left = e.clientX - containerRect.left - (currentDragElement.offsetWidth / 2);
                let top = e.clientY - containerRect.top - (currentDragElement.offsetHeight / 2);
                
                // SÄ±nÄ±rlarÄ± kontrol et
                left = Math.max(0, Math.min(left, containerRect.width - currentDragElement.offsetWidth));
                top = Math.max(0, Math.min(top, containerRect.height - currentDragElement.offsetHeight));
                
                // Pozisyonu ayarla
                currentDragElement.style.left = left + 'px';
                currentDragElement.style.top = top + 'px';
                currentDragElement.style.bottom = 'auto';
                
                // Kediler Ã¼zerinde mi kontrol et
                checkDropOnKedi(e.clientX, e.clientY);
            }
        }

        function dragEnd(e) {
            // Sadece mouse iÃ§in
            if (e.type === 'mouseup' && isDragging && currentDragElement) {
                currentDragElement.classList.remove('dragging');
                currentDragElement.style.zIndex = '15';
                resetItemPosition(currentDragElement);
                isDragging = false;
                currentDragElement = null;
            }
        }

        function dragOver(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            if (!draggedElement || !oyunAktif) return;
            
            const kedi = this.classList.contains('rifki') ? 'rifki' : 'istanbul';
            const istekTuru = kedilerinIstekleri[kedi];
            
            // EÄer kedinin bir isteÄi yoksa, bir Åey yapma
            if (!istekTuru) return;
            
            let dogruCevap = false;
            let yanlisCevap = false;
            
            // DoÄru eÅleÅme kontrolÃ¼
            if (draggedElement.classList.contains('mama-kabi') && istekTuru === 'acikti') {
                dogruCevap = true;
            } else if (draggedElement.classList.contains('su-kabi') && istekTuru === 'susadi') {
                dogruCevap = true;
            } else {
                yanlisCevap = true;
            }
            
            if (dogruCevap) {
                // DoÄru eÅleÅme durumunda
                const basariliMesaj = anneCevaplari.basarili[Math.floor(Math.random() * anneCevaplari.basarili.length)];
                konusmaBalonuOlustur(this, basariliMesaj, 'basarili');
                // Anne afiyet olsun desin
                setTimeout(() => {
                    if (!oyunAktif) return;
                    const anneElement = document.querySelector('.husnanur');
                    const afiyetMesaj = anneCevaplari.afiyet[Math.floor(Math.random() * anneCevaplari.afiyet.length)];
                    konusmaBalonuOlustur(anneElement, afiyetMesaj, 'anne-cevap');
                }, 1500);
                // Skoru artÄ±r
                skor += 10 * seviye;
                document.getElementById('skor').textContent = skor;
                // SÃ¼reyi artÄ±r
                sure += 5;
                document.getElementById('sure').textContent = sure;
                // Ä°steÄi sÄ±fÄ±rla
                delete kedilerinIstekleri[kedi];
                // Bu kedinin timer'Ä±nÄ± da temizle
                if (istekTimers[kedi]) {
                    clearTimeout(istekTimers[kedi]);
                    delete istekTimers[kedi];
                }
                // TeÅekkÃ¼r ettikten hemen sonra yeni istek gelsin
                setTimeout(() => {
                    if (oyunAktif) yeniIstek(kedi);
                }, 1600);
                karsilananIstekSayisi++;
            } else if (yanlisCevap) {
                // YanlÄ±Å eÅleÅme durumunda
                const hataliMesaj = anneCevaplari.hatali[Math.floor(Math.random() * anneCevaplari.hatali.length)];
                konusmaBalonuOlustur(this, hataliMesaj, 'hatali');
                
                // Anne Ã¶zÃ¼r dilesin
                setTimeout(() => {
                    if (!oyunAktif) return;
                    const anneElement = document.querySelector('.husnanur');
                    const ozurMesaj = anneCevaplari.ozur[Math.floor(Math.random() * anneCevaplari.ozur.length)];
                    konusmaBalonuOlustur(anneElement, ozurMesaj, 'ozur');
                }, 1500);
                
                // Skoru azalt
                skor = Math.max(0, skor - 5);
                document.getElementById('skor').textContent = skor;
                
                // SÃ¼reyi azalt
                sure = Math.max(1, sure - 2);
                document.getElementById('sure').textContent = sure;
            }
            
            // Her durumda kabÄ± orijinal yerine dÃ¶ndÃ¼r
            if (draggedElement.classList.contains('mama-kabi')) {
                draggedElement.style.left = orijinalPozisyonlar.mama.left;
                draggedElement.style.top = orijinalPozisyonlar.mama.top;
                draggedElement.style.bottom = orijinalPozisyonlar.mama.bottom;
            } else if (draggedElement.classList.contains('su-kabi')) {
                draggedElement.style.left = orijinalPozisyonlar.su.left;
                draggedElement.style.top = orijinalPozisyonlar.su.top;
                draggedElement.style.bottom = orijinalPozisyonlar.su.bottom;
            }
            
            draggedElement.classList.remove('dragging');
            draggedElement = null;
            touchDragging = false;
        }

        function guncelleHUD() {
            document.getElementById('skor').textContent = skor;
            document.getElementById('sure').textContent = sure;
            document.getElementById('seviye').textContent = seviye;
        }

        function oyunBitir() {
            oyunAktif = false;
            
            // TÃ¼m timer'larÄ± temizle
            Object.values(istekTimers).forEach(timer => clearTimeout(timer));
            istekTimers = {};
            
            document.getElementById('finalSkor').textContent = skor;
            document.getElementById('gameOver').style.display = 'block';
            
            // ANNEEEEEG sesi (metin) - rastgele game over mesajlarÄ±
            const gameOverMesajlari = [
                "ANNEEEEEG! Zaman bitti!",
                "ANNEEEEEG! Oyun bitti kediler aÃ§ kaldÄ±!",
                "ANNEEEEEG! Kediler Ã§ok Ã¼zgÃ¼n!",
                "ANNEEEEEG! Anne Ã§ok yavaÅtÄ±n!"
            ];
            const husnanur = document.querySelector('.husnanur');
            const randomMesaj = gameOverMesajlari[Math.floor(Math.random() * gameOverMesajlari.length)];
            konusmaBalonuOlustur(husnanur, randomMesaj, 'hatali');
        }

        function yeniOyun() {
            skor = 0;
            sure = 30;
            seviye = 1;
            oyunAktif = true;
            oyunBasladi = true;
            kedilerinIstekleri = {};
            kullanilmisPozisyonlar = [];
            
            // Ãnceki timer'larÄ± temizle
            Object.values(istekTimers).forEach(timer => clearTimeout(timer));
            istekTimers = {};
            
            document.getElementById('gameOver').style.display = 'none';
            guncelleHUD();
            karsilananIstekSayisi = 0;
            
            // Kedileri farklÄ± rastgele konumlandÄ±r
            rastgelePozisyon(kediElementleri.rifki, 'rifki');
            rastgelePozisyon(kediElementleri.istanbul, 'istanbul');
            
            // Oyun baÅlangÄ±Ã§ mesajÄ±
            const husnanur = document.querySelector('.husnanur');
            setTimeout(() => {
                konusmaBalonuOlustur(husnanur, "Merhaba kedilerim! Anne burada, size bakacaÄÄ±m!", 'anne-cevap');
            }, 1000);
            
            // Ä°lk istekleri baÅlat - her iki kedi iÃ§in de
            setTimeout(() => {
                if (oyunAktif) yeniIstek('rifki');
            }, 2000);
            
            setTimeout(() => {
                if (oyunAktif) yeniIstek('istanbul');
            }, 3500);
            
            oyunDongusu();
        }

        function oyunDongusu() {
            if (!oyunAktif) return;

            // SÃ¼re sayacÄ±
            const sureInterval = setInterval(() => {
                if (!oyunAktif) {
                    clearInterval(sureInterval);
                    return;
                }
                
                sure--;
                guncelleHUD();
                
                if (sure <= 0) {
                    clearInterval(sureInterval);
                    oyunBitir();
                }
            }, 1000);

            // Her kedi iÃ§in ayrÄ± timer sistemi
            function kediyeIstekVer(kedi) {
                if (!oyunAktif) return;
                
                // EÄer kedinin aktif bir isteÄi yoksa ve timer'Ä± yoksa
                if (!kedilerinIstekleri[kedi] && !istekTimers[kedi]) {
                    // 3-7 saniye arasÄ± rastgele gecikme
                    const gecikme = 3000 + Math.random() * 4000;
                    
                    istekTimers[kedi] = setTimeout(() => {
                        if (oyunAktif && !kedilerinIstekleri[kedi]) {
                            yeniIstek(kedi);
                        }
                        delete istekTimers[kedi];
                        
                        // Bir sonraki istek iÃ§in yeni timer kur
                        setTimeout(() => {
                            kediyeIstekVer(kedi);
                        }, 1000);
                    }, gecikme);
                }
            }

            // Her iki kedi iÃ§in de ayrÄ± dÃ¶ngÃ¼ baÅlat
            setTimeout(() => kediyeIstekVer('rifki'), 1000);
            setTimeout(() => kediyeIstekVer('istanbul'), 2000);

            // Seviye artÄ±rma
            const seviyeInterval = setInterval(() => {
                if (!oyunAktif) {
                    clearInterval(seviyeInterval);
                    return;
                }
                
                const yeniSeviye = Math.floor(skor / 50) + 1;
                if (yeniSeviye > seviye) {
                    seviye = yeniSeviye;
                    guncelleHUD();
                    
                    const husnanur = document.querySelector('.husnanur');
                    konusmaBalonuOlustur(husnanur, `Seviye ${seviye}! Harika gidiyorsun!`, 'basarili');
                }
            }, 2000);
        }

        // DOM yÃ¼klendiÄinde orijinal pozisyonlarÄ± kaydet
        window.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.item').forEach(item => {
                orijinalPozisyonlar[item.classList.contains('mama-kabi') ? 'mama' : 'su'] = {
                    left: item.style.left,
                    top: item.style.top,
                    bottom: item.style.bottom
                };
            });
        });

                // Event listener'larÄ± gÃ¼ncelle
        document.addEventListener('DOMContentLoaded', () => {
            const items = document.querySelectorAll('.item');
            
            items.forEach(item => {
                // Touch events (mobil)
                item.addEventListener('touchstart', handleTouchStart, { passive: false });
                
                // Mouse events (masaÃ¼stÃ¼)
                item.addEventListener('mousedown', dragStart);
            });

            // Global events
            document.addEventListener('touchmove', handleTouchMove, { passive: false });
            document.addEventListener('touchend', handleTouchEnd, { passive: false });
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', dragEnd);

            document.querySelectorAll('.kedi').forEach(kedi => {
                kedi.addEventListener('click', kediTikla);
                kedi.addEventListener('touchend', kediTikla);
            });
        });

        // Oyunu baÅlat - Sayfa yÃ¼klendiÄinde
        window.addEventListener('load', () => {
            // Biraz bekleyip oyunu baÅlat
            setTimeout(() => {
                yeniOyun();
            }, 500);
        });
    </script>
</body>
</html>